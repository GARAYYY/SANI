<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Login - Alevín A</title>
  <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css" />

</head>
<body class="bg-dark d-flex justify-content-center align-items-center min-vh-100">
  <div class="card text-white bg-secondary w-100" style="max-width: 40%;">
    <div class="card-body">
      <h2 class="card-title text-center mb-4">Iniciar sesión</h2>
      <form id="loginForm">
        <div class="mb-3">
          <label for="usuario" class="form-label">Usuario</label>
          <input type="text" class="form-control bg-dark text-white border-secondary" id="usuario" placeholder="Introduce tu usuario" required>
        </div>
        <div class="mb-3">
          <label for="contrasena" class="form-label">Contraseña</label>
          <input type="password" class="form-control bg-dark text-white border-secondary" id="contrasena" placeholder="Introduce tu contraseña" required>
        </div>
        <button type="submit" class="btn btn-primary w-100" id="loginButton">Entrar</button>
      </form>
    </div>
  </div>
</body>

</html>

<script>
  document.getElementById('loginButton').addEventListener('click', function (event) {
    event.preventDefault();
    validarLogin();
});

function validarLogin() {
    const usuario = document.getElementById('usuario').value;
    const contrasena = document.getElementById('contrasena').value;
    fetch('data.json')
        .then(response => response.json())
        .then(data => {
            const usuarioValido = data.find(user => user.usuario === usuario && user.contrasena === contrasena);
            if (usuarioValido) {
                window.location.href = '/paginas/main.html';
                const token = Math.random(1000000000000) * 1000000000000;
                sessionStorage.setItem('token', token)
            } else {
                alert('Usuario o contraseña incorrectos');
            }
        })
        .catch(error => {
            console.error('Error al cargar los datos de usuarios:', error);
        });
}
</script>